import './polyfills.server.mjs';
import{a as E,b as p,c as M,d as P,f as F,g as O,h as N,i as R}from"./chunk-BOQTZFSY.mjs";import{Aa as S,G as s,H as u,Ia as w,N as c,O as l,T as n,Ta as I,U as r,Ua as g,V as m,Wa as D,X as y,Y as x,Z as a,_,g as k,h as L,j as C,n as d,o as j}from"./chunk-R3X2NBOX.mjs";var G=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=d({type:e,selectors:[["app-inicio"]],decls:11,vars:0,consts:[[1,"container","mt-2"],[1,"row"],[1,"col-lg-6"],["src","./assets/portada.png","alt","",2,"width","100%"],[1,"col-lg-6","m-auto"],[1,"text-uppercase",2,"font-size","4rem"],[2,"font-size","2rem"],["type","button","routerLink","/registro",1,"btn","btn-outline-success"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"div",1)(2,"div",2),m(3,"img",3),r(),n(4,"div",4)(5,"h1",5),a(6,"Acortador de enlaces"),r(),n(7,"p",6),a(8,"Una solucion para tus enlaces donde podras medir el rendimiento"),r(),n(9,"button",7),a(10,"Registrate"),r()()()())},dependencies:[g]})}}return e})();var q=(()=>{class e{constructor(i){this.http=i}login(i,t){let o="https://camaleon.onrender.com/login",h={email:i,password:t};return this.http.post(o,h)}static{this.\u0275fac=function(t){return new(t||e)(C(w))}}static{this.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();function K(e,f){e&1&&(n(0,"span",16),a(1,"El Email no puede quedar vacio"),r())}function Q(e,f){e&1&&(n(0,"span",16),a(1,"El password no puede quedar vacio"),r())}function W(e,f){if(e&1&&(n(0,"span",16),a(1),r()),e&2){let i=x();s(),_(i.text)}}var V=(()=>{class e{constructor(i,t,o){this.api=i,this.fb=t,this.router=o,this.validacion=!1,this.miFormulario=this.fb.group({email:[,p.required],password:[,p.required]})}guardar(){if(this.miFormulario.invalid){this.miFormulario.markAllAsTouched();return}else{let i=this.miFormulario?.controls.email?.value,t=this.miFormulario?.controls.password?.value;this.loguiarse(i,t),console.log(i,t),this.miFormulario.reset();return}}loguiarse(i,t){this.api.login(i,t).subscribe(o=>{if(console.log(o),o.permisos){let h={id:o.id,nombre:o.nombre,email:i,password:t,permisos:o.permisos,rol:o.roles};localStorage.setItem("token",JSON.stringify(h));let T=localStorage.getItem("token");if(T){let v=JSON.parse(T);v.permisos&&v.rol==="USER"&&this.router.navigate(["/auth/inicio"]),v.permisos&&v.rol==="ADMIN"&&this.router.navigate(["/admin/inicio"])}}},o=>{console.log(o),o.error.error==="Unauthorized"&&(this.validacion=!0,this.text="Contrase\xF1a o Mail incorrecto",setTimeout(()=>{this.validacion=!1},3500)),o.error.error==="Forbidden"?(this.validacion=!0,this.text="No estas verificado",setTimeout(()=>{this.validacion=!1},3500)):(this.validacion=!0,this.text=o.error.error,setTimeout(()=>{this.validacion=!1},3500))})}validar(i){return this.miFormulario.controls[i].errors&&this.miFormulario.controls[i].touched}static{this.\u0275fac=function(t){return new(t||e)(u(q),u(R),u(I))}}static{this.\u0275cmp=d({type:e,selectors:[["app-login"]],decls:24,vars:4,consts:[[1,"container"],[1,"col-lg-6","offset-lg-3","col-md-12",3,"ngSubmit","formGroup"],[1,"form-label","mt-4","mb-4","text-center","fw-bold"],[1,"form-floating","mb-3"],["type","email","id","floatingInput","placeholder","Email","autocomplete","off","formControlName","email",1,"form-control"],["for","floatingInput"],["class","form-text text-danger",4,"ngIf"],[1,"form-floating"],["type","password","id","floatingPassword","placeholder","Password","autocomplete","off","formControlName","password",1,"form-control"],["for","floatingPassword"],["class","form-text text-danger ",4,"ngIf"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-outline-primary","mt-3","btn-block"],["routerLink","/util/recuperar-password",1,"text-primary","text-center","mt-3",2,"cursor","pointer"],[1,"mt-3",2,"width","80%","height","1px","background-color","rgb(99, 99, 99)","margin","auto"],["type","button","routerLink","/registro",1,"btn","btn-outline-success","mt-3","btn-block"],[1,"form-text","text-danger"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"form",1),y("ngSubmit",function(){return o.guardar()}),n(2,"h1",2),a(3,"INICIAR SECCION"),r(),n(4,"div",3),m(5,"input",4),n(6,"label",5),a(7,"Email"),r(),c(8,K,2,0,"span",6),r(),n(9,"div",7),m(10,"input",8),n(11,"label",9),a(12,"Password"),r(),c(13,Q,2,0,"span",6),r(),c(14,W,2,1,"span",10),n(15,"div",11)(16,"button",12),a(17,"INICIAR SECCION"),r()(),n(18,"p",13),a(19,"\xBFOlvidaste tu contrase\xF1a?"),r(),m(20,"hr",14),n(21,"div",11)(22,"button",15),a(23,"CREAR CUENTA"),r()()()()),t&2&&(s(),l("formGroup",o.miFormulario),s(7),l("ngIf",o.validar("email")),s(5),l("ngIf",o.validar("password")),s(),l("ngIf",o.validacion))},dependencies:[S,g,F,E,M,P,O,N]})}}return e})();var z=(()=>{class e{constructor(i){this.http=i}registro(i){return this.http.post("https://camaleon.onrender.com/registrar",i)}static{this.\u0275fac=function(t){return new(t||e)(C(w))}}static{this.\u0275prov=k({token:e,factory:e.\u0275fac,providedIn:"root"})}}return e})();var B=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275cmp=d({type:e,selectors:[["app-snipper"]],decls:11,vars:0,consts:[[1,"sk-cube-grid"],[1,"sk-cube","sk-cube1"],[1,"sk-cube","sk-cube2"],[1,"sk-cube","sk-cube3"],[1,"sk-cube","sk-cube4"],[1,"sk-cube","sk-cube5"],[1,"sk-cube","sk-cube6"],[1,"sk-cube","sk-cube7"],[1,"sk-cube","sk-cube8"],[1,"sk-cube","sk-cube9"],[1,"capa"]],template:function(t,o){t&1&&(n(0,"div",0),m(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"div",5)(6,"div",6)(7,"div",7)(8,"div",8)(9,"div",9),r(),m(10,"div",10))},styles:[".capa[_ngcontent-%COMP%]{position:absolute;position:fixed;width:100%;height:100vh;background-color:#000;opacity:.2;top:0}.sk-cube-grid[_ngcontent-%COMP%]{position:absolute;position:fixed;top:50%;right:50%;z-index:1}.sk-cube-grid[_ngcontent-%COMP%]{width:70px;height:70px}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube[_ngcontent-%COMP%]{width:33%;height:33%;background-color:#333;float:left;-webkit-animation:_ngcontent-%COMP%_sk-cubeGridScaleDelay 1.3s infinite ease-in-out;animation:_ngcontent-%COMP%_sk-cubeGridScaleDelay 1.3s infinite ease-in-out}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube1[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube2[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube3[_ngcontent-%COMP%]{-webkit-animation-delay:.4s;animation-delay:.4s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube4[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube5[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube6[_ngcontent-%COMP%]{-webkit-animation-delay:.3s;animation-delay:.3s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube7[_ngcontent-%COMP%]{-webkit-animation-delay:0s;animation-delay:0s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube8[_ngcontent-%COMP%]{-webkit-animation-delay:.1s;animation-delay:.1s}.sk-cube-grid[_ngcontent-%COMP%]   .sk-cube9[_ngcontent-%COMP%]{-webkit-animation-delay:.2s;animation-delay:.2s}@-webkit-keyframes _ngcontent-%COMP%_sk-cubeGridScaleDelay{0%,70%,to{-webkit-transform:scale3D(1,1,1);transform:scaleZ(1)}35%{-webkit-transform:scale3D(0,0,1);transform:scale3D(0,0,1)}}@keyframes _ngcontent-%COMP%_sk-cubeGridScaleDelay{0%,70%,to{-webkit-transform:scale3D(1,1,1);transform:scaleZ(1)}35%{-webkit-transform:scale3D(0,0,1);transform:scale3D(0,0,1)}}"]})}}return e})();function ee(e,f){e&1&&(n(0,"span",17),a(1,"Debe de ser mayor a 4 caracteres"),r())}function te(e,f){e&1&&(n(0,"span",17),a(1,"Este campo no puede quedar vacio"),r())}function ie(e,f){e&1&&(n(0,"span",17),a(1,"Debe de ser mayor a 6 caracteres"),r())}function ne(e,f){if(e&1&&(n(0,"span",17),a(1),r()),e&2){let i=x();s(),_(i.text)}}function oe(e,f){e&1&&m(0,"app-snipper")}var U=(()=>{class e{constructor(i,t,o){this.api=i,this.fb=t,this.router=o,this.validacion=!1,this.snipper=!1,this.miFormulario=this.fb.group({nombre:["",[p.required,p.minLength(4)]],email:["",p.required],password:["",[p.required,p.minLength(6)]]})}guardar(){if(this.miFormulario.invalid){this.miFormulario.markAllAsTouched();return}else{this.registrar(this.miFormulario.value),this.miFormulario.reset();return}}registrar(i){this.snipper=!0,this.api.registro(i).subscribe(t=>{this.permisos=t,this.permisos.permisos===!1&&(this.snipper=!1,this.router.navigate(["/util/enviar-correo"]))},t=>{t.error.permisos===!1&&(this.snipper=!1,this.validacion=!0,this.text=t.error.mensaje,setTimeout(()=>{this.validacion=!1},3500))})}validar(i){return this.miFormulario.controls[i].errors&&this.miFormulario.controls[i].touched}static{this.\u0275fac=function(t){return new(t||e)(u(z),u(R),u(I))}}static{this.\u0275cmp=d({type:e,selectors:[["app-registro"]],decls:26,vars:6,consts:[[1,"container"],[1,"col-lg-6","offset-lg-3","col-md-12",3,"ngSubmit","formGroup"],[1,"form-label","mt-4","mb-4","text-center","fw-bold"],[1,"form-floating","mb-3"],["type","text","id","floatingname","placeholder","Nombre","autocomplete","off","formControlName","nombre",1,"form-control"],["for","floatingname"],["class","form-text text-danger",4,"ngIf"],["type","email","id","floatingInput","placeholder","Email","autocomplete","off","formControlName","email",1,"form-control"],["for","floatingInput"],[1,"form-floating"],["type","password","id","floatingPassword","placeholder","Password","autocomplete","off","formControlName","password",1,"form-control"],["for","floatingPassword"],["class","form-text text-danger ",4,"ngIf"],[1,"d-grid","gap-2"],["type","submit",1,"btn","btn-outline-primary","mt-3","btn-block","fs-4"],["routerLink","/login",1,"text-primary","text-center","mt-3",2,"cursor","pointer"],[4,"ngIf"],[1,"form-text","text-danger"]],template:function(t,o){t&1&&(n(0,"div",0)(1,"form",1),y("ngSubmit",function(){return o.guardar()}),n(2,"h1",2),a(3,"REGISTRATE"),r(),n(4,"div",3),m(5,"input",4),n(6,"label",5),a(7,"Nombre"),r(),c(8,ee,2,0,"span",6),r(),n(9,"div",3),m(10,"input",7),n(11,"label",8),a(12,"Email"),r(),c(13,te,2,0,"span",6),r(),n(14,"div",9),m(15,"input",10),n(16,"label",11),a(17,"Password"),r(),c(18,ie,2,0,"span",6),r(),c(19,ne,2,1,"span",12),n(20,"div",13)(21,"button",14),a(22,"Registrarte"),r()(),n(23,"p",15),a(24,"\xBFYa tienes una cuenta?"),r()()(),c(25,oe,1,0,"app-snipper",16)),t&2&&(s(),l("formGroup",o.miFormulario),s(7),l("ngIf",o.validar("nombre")),s(5),l("ngIf",o.validar("email")),s(5),l("ngIf",o.validar("password")),s(),l("ngIf",o.validacion),s(6),l("ngIf",o.snipper))},dependencies:[S,g,F,E,M,P,O,N,B]})}}return e})();var re=[{path:"",component:G},{path:"login",component:V},{path:"registro",component:U}],ge=(()=>{class e{static{this.\u0275fac=function(t){return new(t||e)}}static{this.\u0275mod=j({type:e})}static{this.\u0275inj=L({imports:[D.forChild(re),D]})}}return e})();export{ge as a};
